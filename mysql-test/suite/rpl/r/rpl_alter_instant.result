include/master-slave.inc
[connection master]
use test;
create table t1 (id int primary key, c1 int default 10, c2 varchar(20) default 'holiday') engine = innodb;
insert into t1 values(1, 12345, 'abcde'), (2, default, default), (3, 23456, 'xyzab');
set timestamp = 1;
alter table t1 add column d1 timestamp not null default current_timestamp;
select * from t1;
id	c1	c2	d1
1	12345	abcde	1970-01-01 08:00:01
2	10	holiday	1970-01-01 08:00:01
3	23456	xyzab	1970-01-01 08:00:01
connection slave;
connection slave;
select * from t1;
id	c1	c2	d1
1	12345	abcde	1970-01-01 08:00:01
2	10	holiday	1970-01-01 08:00:01
3	23456	xyzab	1970-01-01 08:00:01
connection master;
alter table t1 add column d2 timestamp not null default current_timestamp, ALGORITHM=copy;
connection slave;
connection slave;
select * from t1;
id	c1	c2	d1	d2
1	12345	abcde	1970-01-01 08:00:01	1970-01-01 08:00:01
2	10	holiday	1970-01-01 08:00:01	1970-01-01 08:00:01
3	23456	xyzab	1970-01-01 08:00:01	1970-01-01 08:00:01
connection master;
drop table t1;
include/rpl_end.inc
