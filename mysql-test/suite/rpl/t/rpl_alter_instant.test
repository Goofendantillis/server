source include/have_innodb.inc;
source include/master-slave.inc;

use test;
create table t1 (id int primary key, c1 int default 10, c2 varchar(20) default 'holiday') engine = innodb;

insert into t1 values(1, 12345, 'abcde'), (2, default, default), (3, 23456, 'xyzab');

set timestamp = 1;
alter table t1 add column d1 timestamp not null default current_timestamp;

select * from t1;
sync_slave_with_master;

connection slave;
select * from t1;

connection master;
alter table t1 add column d2 timestamp not null default current_timestamp, ALGORITHM=copy;

sync_slave_with_master;

connection slave;
select * from t1;

connection master;
drop table t1;

--source include/rpl_end.inc
